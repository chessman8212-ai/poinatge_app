
{% extends "base.html" %}
{% block content %}
<h3>Administration — Tous les pointages</h3>

{% if stats %}
  <div class="card">
    <strong>Totaux par date :</strong>
    <table>
      <thead><tr><th>Date</th><th>Enregistrements</th></tr></thead>
      <tbody>
        {% for d, c in stats %}
          <tr><td>{{ d }}</td><td>{{ c }}</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}

<table>
  <thead>
    <tr>
      <th>ID</th><th>Nom</th><th>Service</th><th>Arrivée</th><th>Départ</th><th>Date</th><th>Note</th><th class="right">Action</th>
    </tr>
  </thead>
  <tbody>
    {% for r in rows %}
      <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.nom }}</td>
        <td>{{ r.service or "" }}</td>
        <td>{{ r.arrivee }}</td>
        <td>{{ r.depart or "" }}</td>
        <td>{{ r.date_pointage }}</td>
        <td>{{ r.note or "" }}</td>
        <td class="right">
          <form method="POST" action="/delete/{{ r.id }}" onsubmit="return confirm('Supprimer cet enregistrement ?');">
            <button class="btn btn-danger" type="submit">Supprimer</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
